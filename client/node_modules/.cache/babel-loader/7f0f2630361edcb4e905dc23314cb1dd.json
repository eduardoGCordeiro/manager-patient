{"ast":null,"code":"import { ADD_CHANGES, ADD_ERRORS, CLEAR_DATA, SAVE_DATA, EDIT_DATA, SEND_DATA_SUCCESS, SEND_DATA_ERROR, CONFIRM_ALERT, PATIENT_EXIST } from '../actions/actionsType';\nimport * as ValidationsForm from '../../validations/patientForm';\nexport function clearData() {\n  return {\n    type: CLEAR_DATA\n  };\n}\n;\nexport function saveData() {\n  return {\n    type: SAVE_DATA\n  };\n}\n;\nexport function editData(data) {\n  return {\n    type: EDIT_DATA,\n    data: data\n  };\n}\n;\nexport function confirmAlert(field, value) {\n  return {\n    type: CONFIRM_ALERT,\n    field: field,\n    value: value\n  };\n}\n;\nexport function validateForm(data) {\n  return (dispatch, getState) => {\n    dispatch(addErrors(ValidationsForm.validateName(data.name)));\n    dispatch(addErrors(ValidationsForm.validateLastName(data.last_name)));\n    dispatch(addErrors(ValidationsForm.validateAgeOfBirth(data.age_of_birth)));\n    dispatch(addErrors(ValidationsForm.validatePhone(data.phone)));\n    dispatch(addErrors(ValidationsForm.validateEmail(data.email)));\n    dispatch(addErrors(ValidationsForm.validateCpf(data.cpf)));\n    dispatch(addErrors(ValidationsForm.validateIdenty(data.identy)));\n    dispatch(addErrors(ValidationsForm.validateZipCode(data.zip_code)));\n    dispatch(addErrors(ValidationsForm.validateState(data.state)));\n    dispatch(addErrors(ValidationsForm.validateCity(data.city)));\n    dispatch(addErrors(ValidationsForm.validateAddress(data.address)));\n    dispatch(addErrors(ValidationsForm.validateAddressNumber(data.address_number)));\n    dispatch(checkErrors(getState()));\n  };\n}\n;\nexport function checkErrors(data) {\n  return (dispatch, getState) => {\n    let invalid_fields = false;\n\n    for (let value of Object.values(data.patientForm.errors)) {\n      if (value === true) {\n        invalid_fields = true;\n      }\n    }\n\n    if (!invalid_fields) {\n      dispatch(verifyPatientExists(getState()));\n    }\n  };\n}\n;\nexport function patientExists() {\n  return {\n    type: PATIENT_EXIST\n  };\n}\n;\nexport function checkPatientExist(patient_exist) {\n  return (dispatch, getState) => {\n    if (patient_exist) {\n      dispatch(saveData());\n      dispatch(sendData(getState()));\n    }\n  };\n}\n;\nexport function sendData(data) {\n  return dispatch => {\n    if (data.patientForm.patient_id === '') {\n      dispatch(fetchSaveData(data));\n    } else {\n      dispatch(fetchEditData(data));\n    }\n  };\n}\n;\nexport function sendDataSuccess() {\n  return {\n    type: SEND_DATA_SUCCESS\n  };\n}\n;\nexport function sendDataError() {\n  return {\n    type: SEND_DATA_ERROR\n  };\n}\n;\nexport function addChanges(name_field, value_field) {\n  return {\n    type: ADD_CHANGES,\n    field: name_field,\n    value: value_field\n  };\n}\n;\nexport function addErrors(data) {\n  return {\n    type: ADD_ERRORS,\n    field_error: data.field,\n    field_error_msg: data.field + '_msg',\n    value_error: data.error,\n    value_error_msg: data.msg_error\n  };\n}\n;\nexport function fetchSaveData(data) {\n  return dispatch => {\n    fetch('https://ybht24vw4a.execute-api.us-east-2.amazonaws.com/Patient-Manager/patient-manager', {\n      method: 'POST',\n      headers: {\n        'x-api-key': 'jsxcKzoEKCag5Ix4dt88F46ZOizynbtN8LHoAJjH',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data.patientForm.patient_form_edit)\n    }).then(response => response.json()).then(response => {\n      if (response.errorType || response.statusCode === 500) {\n        throw response;\n      }\n\n      dispatch(sendDataSuccess());\n    }).catch(error => {\n      dispatch(sendDataError());\n    });\n  };\n}\n;\nexport function fetchEditData(data) {\n  return dispatch => {\n    fetch('https://ybht24vw4a.execute-api.us-east-2.amazonaws.com/Patient-Manager/patient-manager/' + data.patientForm.patient_id, {\n      method: 'PUT',\n      headers: {\n        'x-api-key': 'jsxcKzoEKCag5Ix4dt88F46ZOizynbtN8LHoAJjH',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data.patientForm.patient_form_edit)\n    }).then(response => response.json()).then(response => {\n      if (response.errorType || response.statusCode === 500) {\n        throw response;\n      }\n\n      dispatch(sendDataSuccess());\n    }).catch(error => {\n      dispatch(sendDataError());\n    });\n  };\n}\n;\nexport function verifyPatientExists(data) {\n  return (dispatch, getState) => {\n    fetch('https://ybht24vw4a.execute-api.us-east-2.amazonaws.com/Patient-Manager/patient-manager/' + data.patientForm.patient_form_edit.cpf, {\n      method: 'GET',\n      headers: {\n        'x-api-key': 'jsxcKzoEKCag5Ix4dt88F46ZOizynbtN8LHoAJjH',\n        'Content-Type': 'application/json'\n      }\n    }).then(response => response.json()).then(response => {\n      if (response.errorType || response.statusCode === 500) {\n        throw response;\n      } else {\n        console.log(response);\n\n        if (response.patient.length === 0) {\n          dispatch(checkPatientExist());\n        } else {\n          if (response.patient.length === 1) {\n            if (data.patientForm.patient_id !== '' && response.patient[0].id === data.patientForm.patient_id) {\n              dispatch(checkPatientExist());\n            } else {\n              dispatch(addErrors({\n                field: 'cpf_error',\n                error: true,\n                msg_error: 'Paciente já cadastrado, por favor verifique o cpf.'\n              }));\n            }\n          } else {\n            dispatch(addErrors({\n              field: 'cpf_error',\n              error: true,\n              msg_error: 'Paciente já cadastrado, por favor verifique o cpf.'\n            }));\n          }\n        }\n      }\n    }).catch(error => {\n      dispatch(sendDataError());\n    });\n  };\n}\n;","map":{"version":3,"sources":["/home/eduardo/Documents/projetos/manager-patients/client/src/store/actions/patientForm.js"],"names":["ADD_CHANGES","ADD_ERRORS","CLEAR_DATA","SAVE_DATA","EDIT_DATA","SEND_DATA_SUCCESS","SEND_DATA_ERROR","CONFIRM_ALERT","PATIENT_EXIST","ValidationsForm","clearData","type","saveData","editData","data","confirmAlert","field","value","validateForm","dispatch","getState","addErrors","validateName","name","validateLastName","last_name","validateAgeOfBirth","age_of_birth","validatePhone","phone","validateEmail","email","validateCpf","cpf","validateIdenty","identy","validateZipCode","zip_code","validateState","state","validateCity","city","validateAddress","address","validateAddressNumber","address_number","checkErrors","invalid_fields","Object","values","patientForm","errors","verifyPatientExists","patientExists","checkPatientExist","patient_exist","sendData","patient_id","fetchSaveData","fetchEditData","sendDataSuccess","sendDataError","addChanges","name_field","value_field","field_error","field_error_msg","value_error","error","value_error_msg","msg_error","fetch","method","headers","body","JSON","stringify","patient_form_edit","then","response","json","errorType","statusCode","catch","console","log","patient","length","id"],"mappings":"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","sourcesContent":["import {\n  ADD_CHANGES, \n  ADD_ERRORS, \n  CLEAR_DATA, \n  SAVE_DATA,\n  EDIT_DATA, \n  SEND_DATA_SUCCESS,\n  SEND_DATA_ERROR,\n  CONFIRM_ALERT,\n  PATIENT_EXIST\n} from '../actions/actionsType';\n\nimport * as ValidationsForm from '../../validations/patientForm';\n\nexport function clearData(){\n  return {\n    type: CLEAR_DATA\n  }\n};\n\n\nexport function saveData(){\n  return {\n    type: SAVE_DATA\n  }\n};\n\n\nexport function editData(data){\n  return {\n    type: EDIT_DATA,\n    data: data\n  }\n};\n\n\nexport function confirmAlert(field, value){\n  return {\n    type: CONFIRM_ALERT,\n    field: field,\n    value: value\n  }\n};\n\n\nexport function validateForm(data){\n  return (dispatch, getState) => {\n    dispatch(addErrors(ValidationsForm.validateName(data.name)));\n    dispatch(addErrors(ValidationsForm.validateLastName(data.last_name)));\n    dispatch(addErrors(ValidationsForm.validateAgeOfBirth(data.age_of_birth))); \n    dispatch(addErrors(ValidationsForm.validatePhone(data.phone)));\n    dispatch(addErrors(ValidationsForm.validateEmail(data.email)));\n    dispatch(addErrors(ValidationsForm.validateCpf(data.cpf)));\n    dispatch(addErrors(ValidationsForm.validateIdenty(data.identy)));\n    dispatch(addErrors(ValidationsForm.validateZipCode(data.zip_code)));\n    dispatch(addErrors(ValidationsForm.validateState(data.state)));\n    dispatch(addErrors(ValidationsForm.validateCity(data.city)));\n    dispatch(addErrors(ValidationsForm.validateAddress(data.address)));\n    dispatch(addErrors(ValidationsForm.validateAddressNumber(data.address_number)));\n\n    dispatch(checkErrors(getState()));\n  }\n};\n\n\nexport function checkErrors(data){\n  return (dispatch, getState) => {\n    \n    let invalid_fields = false;\n\n    for(let value of Object.values(data.patientForm.errors)){\n      if(value === true){\n        invalid_fields = true;\n      }\n    }\n\n    if(!invalid_fields){\n      dispatch(verifyPatientExists(getState()));\n    }\n  }\n};\n\n\nexport function patientExists(){\n  return {\n    type: PATIENT_EXIST\n  }\n};\n\n\nexport function checkPatientExist(patient_exist){\n  return (dispatch, getState) => {\n    if(patient_exist){\n      dispatch(saveData());\n      dispatch(sendData(getState()));\n    }\n  }\n};\n\n\nexport function sendData(data){\n  return dispatch => {\n    if(data.patientForm.patient_id === ''){\n      dispatch(fetchSaveData(data));\n    }else {\n      dispatch(fetchEditData(data));\n    }\n  }\n};\n\n\nexport function sendDataSuccess(){\n  return {\n    type: SEND_DATA_SUCCESS\n  };\n};\n\n\nexport function sendDataError(){\n  return {\n    type: SEND_DATA_ERROR\n  };\n};\n\n\nexport function addChanges(name_field, value_field){\n  return {\n    type: ADD_CHANGES,\n    field: name_field,\n    value: value_field,\n  };\n};\n\n\nexport function addErrors(data){\n  return {\n    type: ADD_ERRORS,\n    field_error: data.field,\n    field_error_msg: data.field + '_msg',\n    value_error: data.error,\n    value_error_msg: data.msg_error\n  };\n};\n\n\nexport function fetchSaveData(data) {\n  return dispatch => {\n      fetch('https://ybht24vw4a.execute-api.us-east-2.amazonaws.com/Patient-Manager/patient-manager', {\n          method: 'POST',     \n          headers: {\n              'x-api-key': 'jsxcKzoEKCag5Ix4dt88F46ZOizynbtN8LHoAJjH',\n              'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(data.patientForm.patient_form_edit)\n      }).then(response => response.json())\n        .then(response => {\n          if( response.errorType || response.statusCode === 500){\n              throw (response);\n          }\n          dispatch(sendDataSuccess());\n        })\n        .catch(error => {\n          dispatch(sendDataError());\n        })\n  }\n};\n\n\nexport function fetchEditData(data) {\n  return dispatch => {\n      fetch('https://ybht24vw4a.execute-api.us-east-2.amazonaws.com/Patient-Manager/patient-manager/' + data.patientForm.patient_id, {\n          method: 'PUT',     \n          headers: {\n              'x-api-key': 'jsxcKzoEKCag5Ix4dt88F46ZOizynbtN8LHoAJjH',\n              'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(data.patientForm.patient_form_edit)\n      }).then(response => response.json())\n        .then(response => {\n          if( response.errorType || response.statusCode === 500){\n              throw (response);\n          }\n          dispatch(sendDataSuccess());\n        })\n        .catch(error => {\n          dispatch(sendDataError());\n        })\n  }\n};\n\n\nexport function verifyPatientExists(data) {\n  return (dispatch, getState) => {\n      fetch('https://ybht24vw4a.execute-api.us-east-2.amazonaws.com/Patient-Manager/patient-manager/' + data.patientForm.patient_form_edit.cpf, {\n          method: 'GET',     \n          headers: {\n              'x-api-key': 'jsxcKzoEKCag5Ix4dt88F46ZOizynbtN8LHoAJjH',\n              'Content-Type': 'application/json'\n          }\n      }).then(response => response.json())\n        .then(response => {\n          if( response.errorType || response.statusCode === 500 ){\n              throw (response);\n          }else {\n            console.log(response);\n            if(response.patient.length === 0){\n              dispatch(checkPatientExist());\n            }else {\n              if(response.patient.length === 1){\n                if( data.patientForm.patient_id !== '' && response.patient[0].id === data.patientForm.patient_id){\n                  dispatch(checkPatientExist());      \n                }else {\n                  dispatch(addErrors({field: 'cpf_error', error: true, msg_error: 'Paciente já cadastrado, por favor verifique o cpf.'}));    \n                }\n              }else {\n                dispatch(addErrors({field: 'cpf_error', error: true, msg_error: 'Paciente já cadastrado, por favor verifique o cpf.'}));    \n              }\n            }\n          }\n        })\n        .catch(error => {\n          dispatch(sendDataError());\n        })\n  }\n};"]},"metadata":{},"sourceType":"module"}